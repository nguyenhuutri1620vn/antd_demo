{"ast":null,"code":"import Cookies from 'js-cookie';\nimport _ from 'lodash';\nimport moment from 'moment';\n\n// const optionInit = {\n//     // expires: new Date(),\n//     // path: '/',\n//     // domain: `.${domain}`,\n// };\n\nclass Cookie {\n  constructor() {\n    this.keys = {\n      TOKEN: 'token'\n    };\n  }\n  setItem(key, value, option, onlyDomain = true) {\n    Cookies.set(key, value, this.calcOption(option, onlyDomain));\n  }\n  getItem(key) {\n    return Cookies.get(key);\n  }\n  getItemJson(key) {\n    try {\n      const value = Cookies.get(key);\n      return JSON.parse(value);\n    } catch (e) {\n      return null;\n    }\n  }\n  setItemJson(key, value, option, onlyDomain = true) {\n    Cookies.set(key, JSON.stringify(value), this.calcOption(option, onlyDomain));\n  }\n  removeItem(key, option, onlyDomain = true) {\n    Cookies.remove(key, this.calcOption(option, onlyDomain));\n  }\n  calcOption(option, onlyDomain = true) {\n    let calcOption = typeof option === 'object' ? _.cloneDeep(option) : {};\n    if (!calcOption.domain && onlyDomain) {\n      const host = window.location.host;\n      const hostSegments = host.split(':')[0].split('.');\n      const domain = hostSegments.splice(-2).join('.');\n      calcOption.domain = `.${domain}`;\n    }\n    if (!(calcOption.expires instanceof Date)) {\n      let expiredDate = null;\n      if (calcOption.expires > 0) {\n        expiredDate = new Date(calcOption.expires);\n      } else {\n        expiredDate = moment().add(30, 'minutes').toDate();\n      }\n      calcOption.expires = expiredDate;\n    }\n    return calcOption;\n  }\n}\nexport default new Cookie();","map":{"version":3,"names":["Cookies","_","moment","Cookie","constructor","keys","TOKEN","setItem","key","value","option","onlyDomain","set","calcOption","getItem","get","getItemJson","JSON","parse","e","setItemJson","stringify","removeItem","remove","cloneDeep","domain","host","window","location","hostSegments","split","splice","join","expires","Date","expiredDate","add","toDate"],"sources":["/home/trinh/Documents/code/mss-showme/src/app/utils/cookie.ts"],"sourcesContent":["import Cookies, { CookieAttributes } from 'js-cookie';\nimport _ from 'lodash';\nimport moment from 'moment';\n\n// const optionInit = {\n//     // expires: new Date(),\n//     // path: '/',\n//     // domain: `.${domain}`,\n// };\n\nclass Cookie {\n  keys = {\n    TOKEN: 'token',\n  };\n\n  setItem(key: string, value: any, option: object, onlyDomain: boolean = true): void {\n    Cookies.set(key, value, this.calcOption(option, onlyDomain));\n  }\n\n  getItem(key: string): string | undefined {\n    return Cookies.get(key);\n  }\n\n  getItemJson(key: string): any {\n    try {\n      const value: any = Cookies.get(key);\n      return JSON.parse(value);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  setItemJson(key: string, value: any, option: any, onlyDomain = true): void {\n    Cookies.set(key, JSON.stringify(value), this.calcOption(option, onlyDomain));\n  }\n\n  removeItem(key: string, option: any, onlyDomain = true): void {\n    Cookies.remove(key, this.calcOption(option, onlyDomain));\n  }\n\n  calcOption(option: any, onlyDomain = true): CookieAttributes {\n    let calcOption: any = typeof option === 'object' ? _.cloneDeep(option) : {};\n    if (!calcOption.domain && onlyDomain) {\n      const host = window.location.host;\n      const hostSegments = host.split(':')[0].split('.');\n      const domain = hostSegments.splice(-2).join('.');\n      calcOption.domain = `.${domain}`;\n    }\n\n    if (!(calcOption.expires instanceof Date)) {\n      let expiredDate = null;\n      if (calcOption.expires > 0) {\n        expiredDate = new Date(calcOption.expires);\n      } else {\n        expiredDate = moment().add(30, 'minutes').toDate();\n      }\n      calcOption.expires = expiredDate;\n    }\n\n    return calcOption;\n  }\n}\n\nexport default new Cookie();\n"],"mappings":"AAAA,OAAOA,OAAO,MAA4B,WAAW;AACrD,OAAOC,CAAC,MAAM,QAAQ;AACtB,OAAOC,MAAM,MAAM,QAAQ;;AAE3B;AACA;AACA;AACA;AACA;;AAEA,MAAMC,MAAM,CAAC;EAAAC,YAAA;IAAA,KACXC,IAAI,GAAG;MACLC,KAAK,EAAE;IACT,CAAC;EAAA;EAEDC,OAAOA,CAACC,GAAW,EAAEC,KAAU,EAAEC,MAAc,EAAEC,UAAmB,GAAG,IAAI,EAAQ;IACjFX,OAAO,CAACY,GAAG,CAACJ,GAAG,EAAEC,KAAK,EAAE,IAAI,CAACI,UAAU,CAACH,MAAM,EAAEC,UAAU,CAAC,CAAC;EAC9D;EAEAG,OAAOA,CAACN,GAAW,EAAsB;IACvC,OAAOR,OAAO,CAACe,GAAG,CAACP,GAAG,CAAC;EACzB;EAEAQ,WAAWA,CAACR,GAAW,EAAO;IAC5B,IAAI;MACF,MAAMC,KAAU,GAAGT,OAAO,CAACe,GAAG,CAACP,GAAG,CAAC;MACnC,OAAOS,IAAI,CAACC,KAAK,CAACT,KAAK,CAAC;IAC1B,CAAC,CAAC,OAAOU,CAAC,EAAE;MACV,OAAO,IAAI;IACb;EACF;EAEAC,WAAWA,CAACZ,GAAW,EAAEC,KAAU,EAAEC,MAAW,EAAEC,UAAU,GAAG,IAAI,EAAQ;IACzEX,OAAO,CAACY,GAAG,CAACJ,GAAG,EAAES,IAAI,CAACI,SAAS,CAACZ,KAAK,CAAC,EAAE,IAAI,CAACI,UAAU,CAACH,MAAM,EAAEC,UAAU,CAAC,CAAC;EAC9E;EAEAW,UAAUA,CAACd,GAAW,EAAEE,MAAW,EAAEC,UAAU,GAAG,IAAI,EAAQ;IAC5DX,OAAO,CAACuB,MAAM,CAACf,GAAG,EAAE,IAAI,CAACK,UAAU,CAACH,MAAM,EAAEC,UAAU,CAAC,CAAC;EAC1D;EAEAE,UAAUA,CAACH,MAAW,EAAEC,UAAU,GAAG,IAAI,EAAoB;IAC3D,IAAIE,UAAe,GAAG,OAAOH,MAAM,KAAK,QAAQ,GAAGT,CAAC,CAACuB,SAAS,CAACd,MAAM,CAAC,GAAG,CAAC,CAAC;IAC3E,IAAI,CAACG,UAAU,CAACY,MAAM,IAAId,UAAU,EAAE;MACpC,MAAMe,IAAI,GAAGC,MAAM,CAACC,QAAQ,CAACF,IAAI;MACjC,MAAMG,YAAY,GAAGH,IAAI,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC;MAClD,MAAML,MAAM,GAAGI,YAAY,CAACE,MAAM,CAAC,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;MAChDnB,UAAU,CAACY,MAAM,GAAI,IAAGA,MAAO,EAAC;IAClC;IAEA,IAAI,EAAEZ,UAAU,CAACoB,OAAO,YAAYC,IAAI,CAAC,EAAE;MACzC,IAAIC,WAAW,GAAG,IAAI;MACtB,IAAItB,UAAU,CAACoB,OAAO,GAAG,CAAC,EAAE;QAC1BE,WAAW,GAAG,IAAID,IAAI,CAACrB,UAAU,CAACoB,OAAO,CAAC;MAC5C,CAAC,MAAM;QACLE,WAAW,GAAGjC,MAAM,CAAC,CAAC,CAACkC,GAAG,CAAC,EAAE,EAAE,SAAS,CAAC,CAACC,MAAM,CAAC,CAAC;MACpD;MACAxB,UAAU,CAACoB,OAAO,GAAGE,WAAW;IAClC;IAEA,OAAOtB,UAAU;EACnB;AACF;AAEA,eAAe,IAAIV,MAAM,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}