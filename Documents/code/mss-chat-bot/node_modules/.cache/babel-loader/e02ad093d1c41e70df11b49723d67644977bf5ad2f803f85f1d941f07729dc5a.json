{"ast":null,"code":"import _regeneratorRuntime from\"/home/trinh/Documents/code/mss-showme/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/home/trinh/Documents/code/mss-showme/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/trinh/Documents/code/mss-showme/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import*as ChatServices from'../app/services';export default function getService(_ref){var valueMessage=_ref.valueMessage,isLoadingRespons=_ref.isLoadingRespons,setIsOpen=_ref.setIsOpen,setSubmitMessage=_ref.setSubmitMessage,setValueMessage=_ref.setValueMessage,setIsLoadingRespons=_ref.setIsLoadingRespons;var APISendMessage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userMessage,resp,botResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:userMessage=valueMessage;setSubmitMessage(function(prev){return[].concat(_toConsumableArray(prev),[{text:userMessage,sender:'user'}]);});setValueMessage('');setIsLoadingRespons(true);_context.next=6;return ChatServices.sendMessage({Message:userMessage});case 6:resp=_context.sent;botResponse=resp.Message;setSubmitMessage(function(prev){var _resp$Content;return[].concat(_toConsumableArray(prev),[{text:botResponse,sender:'bot',type:resp.Type,content:resp===null||resp===void 0?void 0:(_resp$Content=resp.Content)===null||_resp$Content===void 0?void 0:_resp$Content.Datas}]);});setIsLoadingRespons(false);case 10:case\"end\":return _context.stop();}},_callee);}));return function APISendMessage(){return _ref2.apply(this,arguments);};}();var sendMessage=function sendMessage(e,type){if(type==='mouse'){e===null||e===void 0?void 0:e.preventDefault();if(valueMessage.trim()!==''){APISendMessage();}else{setValueMessage('');}}else if(type==='key'){if((e===null||e===void 0?void 0:e.key)==='Enter'&&!isLoadingRespons){if(valueMessage.trim()!==''){APISendMessage();}else{setValueMessage('');}}}};var handleInput=function handleInput(e){if((e===null||e===void 0?void 0:e.target.value.length)<=500){setValueMessage(e===null||e===void 0?void 0:e.target.value);}};return{sendMessage:sendMessage,handleInput:handleInput};}","map":{"version":3,"names":["ChatServices","getService","_ref","valueMessage","isLoadingRespons","setIsOpen","setSubmitMessage","setValueMessage","setIsLoadingRespons","APISendMessage","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userMessage","resp","botResponse","wrap","_callee$","_context","prev","next","concat","_toConsumableArray","text","sender","sendMessage","Message","sent","_resp$Content","type","Type","content","Content","Datas","stop","apply","arguments","e","preventDefault","trim","key","handleInput","target","value","length"],"sources":["/home/trinh/Documents/code/mss-showme/src/services/InputServices.ts"],"sourcesContent":["import * as ChatServices from '../app/services';\n\nexport default function getService({\n    valueMessage,\n    isLoadingRespons,\n    setIsOpen,\n    setSubmitMessage,\n    setValueMessage,\n    setIsLoadingRespons,\n}: any) {\n\n    const APISendMessage = async () => {\n        const userMessage = valueMessage;\n        setSubmitMessage((prev: any) => [...prev, { text: userMessage, sender: 'user' }]);\n        setValueMessage('');\n        setIsLoadingRespons(true);\n        let resp: any = await ChatServices.sendMessage({ Message: userMessage })\n        const botResponse = resp.Message;\n        setSubmitMessage((prev: any) => [...prev, { text: botResponse, sender: 'bot', type: resp.Type, content: resp?.Content?.Datas }]);\n        setIsLoadingRespons(false);\n    }\n\n    const sendMessage = (e: any, type: string) => {\n        if (type === 'mouse') {\n            e?.preventDefault();\n            if (valueMessage.trim() !== '') {\n                APISendMessage();\n            } else {\n                setValueMessage('');\n            }\n        } else if (type === 'key') {\n            if (e?.key === 'Enter' && !isLoadingRespons) {\n                if (valueMessage.trim() !== '') {\n                    APISendMessage();\n                } else {\n                    setValueMessage('');\n                }\n            }\n        }\n    }\n\n    const handleInput = (e: any) => {\n        if (e?.target.value.length <= 500) {\n            setValueMessage(e?.target.value);\n        }\n    }\n    return {\n        sendMessage,\n        handleInput\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}