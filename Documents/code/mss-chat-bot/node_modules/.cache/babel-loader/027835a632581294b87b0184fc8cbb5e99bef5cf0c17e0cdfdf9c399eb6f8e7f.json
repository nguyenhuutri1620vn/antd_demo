{"ast":null,"code":"import _regeneratorRuntime from\"/home/trinh/Documents/code/mss-showme/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/trinh/Documents/code/mss-showme/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/trinh/Documents/code/mss-showme/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import IconChatBot from'./ChatBot/IconChatbot';import InputMessage from'./ChatBot/InputMessage';import'../styles/index.scss';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=function App(){var inputRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),submitMessage=_useState4[0],setSubmitMessage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoadingRespons=_useState6[0],setIsLoadingRespons=_useState6[1];var checkPermission=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,se_permission;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post('http://172.16.9.47:8989/token/validate',{Token:localStorage.getItem('Token')});case 3:response=_context.sent;se_permission='';if((response===null||response===void 0?void 0:response.data.IsValid)===true){if(response.data.ShowMeLv1&&response.data.ShowMeLv2){se_permission='all';}else if(response.data.ShowMeLv1&&!response.data.ShowMeLv2){se_permission='level_1';}else if(!response.data.ShowMeLv1&&response.data.ShowMeLv2){se_permission='level_2';}localStorage.setItem('se_permission',se_permission);}localStorage.removeItem('Token');_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function checkPermission(){return _ref.apply(this,arguments);};}();useEffect(function(){checkPermission();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:localStorage.getItem('se_permission')!==''?isOpen?/*#__PURE__*/_jsx(InputMessage,{isOpen:isOpen,inputRef:inputRef,submitMessage:submitMessage,isLoadingRespons:isLoadingRespons,setIsOpen:setIsOpen,setSubmitMessage:setSubmitMessage,setIsLoadingRespons:setIsLoadingRespons}):/*#__PURE__*/_jsx(IconChatBot,{setIsOpen:setIsOpen}):null});};export default App;","map":{"version":3,"names":["React","useEffect","useRef","useState","IconChatBot","InputMessage","axios","jsx","_jsx","Fragment","_Fragment","App","inputRef","_useState","_useState2","_slicedToArray","isOpen","setIsOpen","_useState3","_useState4","submitMessage","setSubmitMessage","_useState5","_useState6","isLoadingRespons","setIsLoadingRespons","checkPermission","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","se_permission","wrap","_callee$","_context","prev","next","post","Token","localStorage","getItem","sent","data","IsValid","ShowMeLv1","ShowMeLv2","setItem","removeItem","t0","console","log","stop","apply","arguments","children"],"sources":["/home/trinh/Documents/code/mss-showme/src/components/index.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport IconChatBot from './ChatBot/IconChatbot';\nimport InputMessage from './ChatBot/InputMessage';\nimport * as ChatServices from '../app/services';\n\nimport '../styles/index.scss';\nimport axios from 'axios';\n\nconst App = () => {\n    const inputRef = useRef(null);\n    const [isOpen, setIsOpen] = useState<boolean>(false);\n    const [submitMessage, setSubmitMessage] = useState<any>([]);\n    const [isLoadingRespons, setIsLoadingRespons] = useState<boolean>(false);\n\n    const checkPermission = async () => {\n        try {\n            const response: any = await axios.post('http://172.16.9.47:8989/token/validate', { Token: localStorage.getItem('Token') });\n            let se_permission = ''\n            if (response?.data.IsValid === true) {\n                if (response.data.ShowMeLv1 && response.data.ShowMeLv2) {\n                    se_permission = 'all'\n                } else if (response.data.ShowMeLv1 && !response.data.ShowMeLv2) {\n                    se_permission = 'level_1'\n                } else if (!response.data.ShowMeLv1 && response.data.ShowMeLv2) {\n                    se_permission = 'level_2'\n                }\n                localStorage.setItem('se_permission', se_permission);\n            }\n            localStorage.removeItem('Token');\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    useEffect(() => {\n        checkPermission();\n    }, [])\n\n    return (\n        <>\n            {localStorage.getItem('se_permission') !== '' ? isOpen ?\n                <InputMessage\n                    isOpen={isOpen}\n                    inputRef={inputRef}\n                    submitMessage={submitMessage}\n                    isLoadingRespons={isLoadingRespons}\n                    setIsOpen={setIsOpen}\n                    setSubmitMessage={setSubmitMessage}\n                    setIsLoadingRespons={setIsLoadingRespons}\n                />\n                :\n                <IconChatBot\n                    setIsOpen={setIsOpen} />\n                : null\n            }\n        </>\n    );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}