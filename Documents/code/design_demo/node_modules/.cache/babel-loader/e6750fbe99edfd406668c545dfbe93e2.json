{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { clone, each } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { regionToBBox } from '../util/util';\n\nvar RegionFilterAnnotation =\n/** @class */\nfunction (_super) {\n  __extends(RegionFilterAnnotation, _super);\n\n  function RegionFilterAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * 默认的配置项\n   * @returns {object} 默认的配置项\n   */\n\n\n  RegionFilterAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'regionFilter',\n      locationType: 'region',\n      start: null,\n      end: null,\n      color: null,\n      shape: []\n    });\n  };\n\n  RegionFilterAnnotation.prototype.renderInner = function (group) {\n    var _this = this;\n\n    var start = this.get('start');\n    var end = this.get('end'); // 1. add region layer\n\n    var layer = this.addGroup(group, {\n      id: this.getElementId('region-filter'),\n      capture: false\n    }); // 2. clone shape & color it\n\n    each(this.get('shapes'), function (shape, shapeIdx) {\n      var type = shape.get('type');\n      var attrs = clone(shape.attr());\n\n      _this.adjustShapeAttrs(attrs);\n\n      _this.addShape(layer, {\n        id: _this.getElementId(\"shape-\" + type + \"-\" + shapeIdx),\n        capture: false,\n        type: type,\n        attrs: attrs\n      });\n    }); // 3. clip\n\n    var clipBBox = regionToBBox({\n      start: start,\n      end: end\n    });\n    layer.setClip({\n      type: 'rect',\n      attrs: {\n        x: clipBBox.minX,\n        y: clipBBox.minY,\n        width: clipBBox.width,\n        height: clipBBox.height\n      }\n    });\n  };\n\n  RegionFilterAnnotation.prototype.adjustShapeAttrs = function (attr) {\n    var color = this.get('color');\n\n    if (attr.fill) {\n      attr.fill = attr.fillStyle = color;\n    }\n\n    attr.stroke = attr.strokeStyle = color;\n  };\n\n  return RegionFilterAnnotation;\n}(GroupComponent);\n\nexport default RegionFilterAnnotation;","map":null,"metadata":{},"sourceType":"module"}