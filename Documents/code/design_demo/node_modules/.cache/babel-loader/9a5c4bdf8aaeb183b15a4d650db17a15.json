{"ast":null,"code":"import React from 'react';\nimport { useXFlowApp, XFlowAppExtensionMoudle } from '@antv/xflow-core';\nimport { ContextMenuConfig } from './config';\nimport { createModule } from './module';\nimport { ContextMenuRender } from './components';\nexport const CONFIG_TYPE = 'CanvasContextMenu';\nexport const CanvasContextMenu = props => {\n  const xflow = useXFlowApp();\n  const canRender = !!xflow;\n  /** 获取ContextMenu的配置 */\n\n  const contextMenuConfig = React.useMemo(() => props.config ? props.config : new ContextMenuConfig(), [props.config]);\n  return React.createElement(XFlowAppExtensionMoudle, {\n    createModule: createModule,\n    config: contextMenuConfig\n  }, canRender && React.createElement(ContextMenuRender, {\n    config: contextMenuConfig\n  }));\n};\nexport const createCtxMenuConfig = addOptions => props => {\n  /** bridge config and props */\n  const proxy = React.useMemo(() => ({\n    getValue: () => ({})\n  }), []);\n\n  proxy.getValue = () => props;\n\n  const toolbarConfig = React.useMemo(() => {\n    const config = new ContextMenuConfig();\n    addOptions(config, proxy);\n    return config;\n  }, [proxy]);\n  return toolbarConfig;\n};","map":null,"metadata":{},"sourceType":"module"}