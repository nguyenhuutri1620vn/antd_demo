{"ast":null,"code":"import { Angle } from '../../geometry';\nexport const watermark = function (img, options) {\n  const width = img.width;\n  const height = img.height;\n  const canvas = document.createElement('canvas');\n  canvas.width = width * 3;\n  canvas.height = height * 3;\n  const ctx = canvas.getContext('2d');\n  const angle = options.angle != null ? -options.angle : -20;\n  const radians = Angle.toRad(angle);\n  const stepX = canvas.width / 4;\n  const stepY = canvas.height / 4;\n\n  for (let i = 0; i < 4; i += 1) {\n    for (let j = 0; j < 4; j += 1) {\n      if ((i + j) % 2 > 0) {\n        ctx.setTransform(1, 0, 0, 1, (2 * i - 1) * stepX, (2 * j - 1) * stepY);\n        ctx.rotate(radians);\n        ctx.drawImage(img, -width / 2, -height / 2, width, height);\n      }\n    }\n  }\n\n  return canvas;\n};","map":null,"metadata":{},"sourceType":"module"}