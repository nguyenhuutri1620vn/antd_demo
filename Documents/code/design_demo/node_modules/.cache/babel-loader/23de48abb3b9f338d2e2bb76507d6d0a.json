{"ast":null,"code":"import { Point } from '../../geometry';\nimport { toResult } from './util';\nexport const radial = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), false, args);\nexport const radialOriented = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), true, args);\n\nfunction radialLayout(portCenterOffset, autoOrient, args) {\n  const offset = args.offset != null ? args.offset : 20;\n  const origin = new Point(0, 0);\n  const angle = -portCenterOffset.theta(origin);\n  const pos = portCenterOffset.clone().move(origin, offset).diff(portCenterOffset).round();\n  let y = '.3em';\n  let textAnchor;\n  let orientAngle = angle;\n\n  if ((angle + 90) % 180 === 0) {\n    textAnchor = autoOrient ? 'end' : 'middle';\n\n    if (!autoOrient && angle === -270) {\n      y = '0em';\n    }\n  } else if (angle > -270 && angle < -90) {\n    textAnchor = 'start';\n    orientAngle = angle - 180;\n  } else {\n    textAnchor = 'end';\n  }\n\n  return toResult({\n    position: pos.round().toJSON(),\n    angle: autoOrient ? orientAngle : 0,\n    attrs: {\n      '.': {\n        y,\n        'text-anchor': textAnchor\n      }\n    }\n  }, args);\n}","map":null,"metadata":{},"sourceType":"module"}