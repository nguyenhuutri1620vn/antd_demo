{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDrillStepDefaultConfig = exports.isEqualDrillSteps = exports.topojson2geojson = exports.getGeoAreaConfig = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar util_1 = require(\"@antv/util\");\n\nvar topojson = (0, tslib_1.__importStar)(require(\"topojson-client\"));\n\nvar constants_1 = require(\"./constants\");\n\nvar getGeoAreaConfig = function (geoArea) {\n  var config = {\n    url: constants_1.GEO_AREA_URL,\n    type: 'topojson',\n    extension: 'topo.json'\n  };\n  if ((0, util_1.isUndefined)(geoArea)) return config;\n\n  if (typeof geoArea === 'string') {\n    config.url = geoArea;\n  } else {\n    config.url = (geoArea === null || geoArea === void 0 ? void 0 : geoArea.url) || constants_1.GEO_AREA_URL;\n    config.type = geoArea.type;\n    config.extension = geoArea.type === 'topojson' ? 'topo.json' : 'json';\n  }\n\n  return config;\n};\n\nexports.getGeoAreaConfig = getGeoAreaConfig;\n\nvar topojson2geojson = function (json) {\n  try {\n    var geojson = topojson.feature(json, 'json');\n    return geojson;\n  } catch (err) {\n    throw new Error('Failed convert to geojson from topojson, topojson default layer name \"json\"');\n  }\n};\n\nexports.topojson2geojson = topojson2geojson;\n\nvar isEqualDrillSteps = function (newSteps, oldSteps) {\n  if (newSteps.length !== oldSteps.length) {\n    return false;\n  }\n\n  for (var index = 0; index < newSteps.length; index++) {\n    var _a = newSteps[index],\n        level = _a.level,\n        granularity = _a.granularity;\n\n    if (oldSteps[index].level !== level || oldSteps[index].granularity !== granularity) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nexports.isEqualDrillSteps = isEqualDrillSteps;\n\nvar getDrillStepDefaultConfig = function (options) {\n  var config = (0, util_1.pick)(options, ['source', 'color', 'style', 'state', 'label', 'tooltip']);\n  return config;\n};\n\nexports.getDrillStepDefaultConfig = getDrillStepDefaultConfig;","map":null,"metadata":{},"sourceType":"script"}