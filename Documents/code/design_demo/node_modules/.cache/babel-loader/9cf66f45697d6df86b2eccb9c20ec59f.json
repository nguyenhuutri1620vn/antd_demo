{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Deferred } from '../common/deferred';\nimport { Disposable } from '../common/disposable';\nexport var NsModelServiceConfig;\n\n(function (NsModelServiceConfig) {\n  NsModelServiceConfig.CONFIG_TYPE = 'MODEL_SERVICE_CONFIG';\n})(NsModelServiceConfig || (NsModelServiceConfig = {}));\n\nconst dispoableNoop = () => Disposable.create(() => {});\n\nexport class ModelServiceConfig {\n  constructor() {\n    /** CONFIG_TYPE */\n    this.CONFIG_TYPE = NsModelServiceConfig.CONFIG_TYPE;\n    /** 外部注册context的方法 */\n\n    this.registerModelFn = dispoableNoop;\n    /** CONFIG_TYPE */\n\n    this.isMounted = new Deferred();\n\n    this.registerModel = registerModel => {\n      this.registerModelFn = registerModel;\n    };\n\n    this.setMountState = () => {\n      this.isMounted.resolve(true);\n    };\n\n    this.getConfig = () => __awaiter(this, void 0, void 0, function* () {\n      yield this.isMounted.promise;\n      return {\n        CONFIG_TYPE: this.CONFIG_TYPE,\n        modelRegisterFunc: this.registerModelFn || dispoableNoop\n      };\n    });\n\n    this.dispose = () => {\n      this.registerModelFn = dispoableNoop;\n      this.isMounted = new Deferred();\n    };\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}