{"ast":null,"code":"import { __extends } from \"tslib\";\nimport ListState from './list-state';\nvar STATUS_UNCHECKED = 'unchecked';\n\nvar ListFocus =\n/** @class */\nfunction (_super) {\n  __extends(ListFocus, _super);\n\n  function ListFocus() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ListFocus.prototype.toggle = function () {\n    var triggerInfo = this.getTriggerListInfo();\n\n    if (triggerInfo === null || triggerInfo === void 0 ? void 0 : triggerInfo.item) {\n      var list_1 = triggerInfo.list,\n          clickedItem = triggerInfo.item;\n      var items = list_1.getItems();\n      var checkedItems = items.filter(function (t) {\n        return !list_1.hasState(t, STATUS_UNCHECKED);\n      });\n      var uncheckedItems = items.filter(function (t) {\n        return list_1.hasState(t, STATUS_UNCHECKED);\n      });\n      var checkedItem = checkedItems[0];\n      /**\n       * 1. 初始化，全部 checked。此时，点击 radio, clickItem 进入聚焦\n       * 2. 当前只选中一个\n       *    2.1 且选中 item 等于 clickItem，退出聚焦，全部重新选中\n       *    2.2 替换聚焦的 item\n       * 3. 其它，同 2.2\n       */\n\n      if (items.length === checkedItems.length) {\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n          var item = items_1[_i];\n          list_1.setItemState(item, STATUS_UNCHECKED, item.id !== clickedItem.id);\n        }\n      } else if (items.length - uncheckedItems.length === 1) {\n        if (checkedItem.id === clickedItem.id) {\n          for (var _a = 0, items_2 = items; _a < items_2.length; _a++) {\n            var item = items_2[_a];\n            list_1.setItemState(item, STATUS_UNCHECKED, false);\n          }\n        } else {\n          for (var _b = 0, items_3 = items; _b < items_3.length; _b++) {\n            var item = items_3[_b];\n            list_1.setItemState(item, STATUS_UNCHECKED, item.id !== clickedItem.id);\n          }\n        }\n      } else {\n        for (var _c = 0, items_4 = items; _c < items_4.length; _c++) {\n          var item = items_4[_c];\n          list_1.setItemState(item, STATUS_UNCHECKED, item.id !== clickedItem.id);\n        }\n      }\n    }\n  };\n\n  return ListFocus;\n}(ListState);\n\nexport default ListFocus;","map":null,"metadata":{},"sourceType":"module"}