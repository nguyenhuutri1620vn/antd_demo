{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport SingleTapRecognizer, { MAX_DIST, MAX_TAP_INTERVAL } from './single_tap_recognizer';\n\nvar TapRecognizer = function () {\n  function TapRecognizer(options) {\n    _classCallCheck(this, TapRecognizer);\n\n    _defineProperty(this, \"singleTap\", void 0);\n\n    _defineProperty(this, \"numTaps\", void 0);\n\n    _defineProperty(this, \"lastTime\", void 0);\n\n    _defineProperty(this, \"lastTap\", void 0);\n\n    _defineProperty(this, \"count\", void 0);\n\n    this.singleTap = new SingleTapRecognizer(options);\n    this.numTaps = options.numTaps;\n    this.reset();\n  }\n\n  _createClass(TapRecognizer, [{\n    key: \"reset\",\n    value: function reset() {\n      this.lastTime = Infinity;\n      delete this.lastTap;\n      this.count = 0;\n      this.singleTap.reset();\n    }\n  }, {\n    key: \"touchstart\",\n    value: function touchstart(e, points, mapTouches) {\n      this.singleTap.touchstart(e, points, mapTouches);\n    }\n  }, {\n    key: \"touchmove\",\n    value: function touchmove(e, points, mapTouches) {\n      this.singleTap.touchmove(e, points, mapTouches);\n    }\n  }, {\n    key: \"touchend\",\n    value: function touchend(e, points, mapTouches) {\n      var tap = this.singleTap.touchend(e, points, mapTouches);\n\n      if (tap) {\n        var soonEnough = e.timeStamp - this.lastTime < MAX_TAP_INTERVAL;\n        var closeEnough = !this.lastTap || this.lastTap.dist(tap) < MAX_DIST;\n\n        if (!soonEnough || !closeEnough) {\n          this.reset();\n        }\n\n        this.count++;\n        this.lastTime = e.timeStamp;\n        this.lastTap = tap;\n\n        if (this.count === this.numTaps) {\n          this.reset();\n          return tap;\n        }\n      }\n    }\n  }]);\n\n  return TapRecognizer;\n}();\n\nexport { TapRecognizer as default };","map":null,"metadata":{},"sourceType":"module"}