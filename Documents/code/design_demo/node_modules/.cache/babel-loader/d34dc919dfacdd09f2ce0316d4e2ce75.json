{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { each } from '@antv/util';\nimport { geometry as geometryAdaptor } from '../../adaptor/geometries/base';\nimport { AXIS_META_CONFIG_KEYS } from '../../constant';\nimport { pick, deepAssign } from '../../utils';\n/**\n *\n * @param params 分面图 参数\n * @returns facet eachView 的回调设置每个 view 的展示\n */\n\nexport function execViewAdaptor(viewOfG2, options) {\n  var data = options.data,\n      coordinate = options.coordinate,\n      interactions = options.interactions,\n      annotations = options.annotations,\n      animation = options.animation,\n      tooltip = options.tooltip,\n      axes = options.axes,\n      meta = options.meta,\n      geometries = options.geometries; // 1. data, optional\n\n  if (data) {\n    viewOfG2.data(data);\n  } // 2. meta 配置\n\n\n  var scales = {};\n\n  if (axes) {\n    each(axes, function (axis, field) {\n      scales[field] = pick(axis, AXIS_META_CONFIG_KEYS);\n    });\n  }\n\n  scales = deepAssign({}, meta, scales);\n  viewOfG2.scale(scales); // 3. coordinate 配置 (默认由顶层决定)\n\n  if (coordinate) {\n    viewOfG2.coordinate(coordinate);\n  } // 4. axis 轴配置 (默认由顶层决定，但可以通过 false 强制关闭)\n\n\n  if (axes === false) {\n    viewOfG2.axis(false);\n  } else {\n    each(axes, function (axis, field) {\n      viewOfG2.axis(field, axis);\n    });\n  }\n\n  each(geometries, function (geometry) {\n    // Geometry\n    var ext = geometryAdaptor({\n      chart: viewOfG2,\n      options: geometry\n    }).ext; // Geometry adjust\n\n    var adjust = geometry.adjust;\n\n    if (adjust) {\n      ext.geometry.adjust(adjust);\n    }\n  }); // 5. interactions\n\n  each(interactions, function (interaction) {\n    if (interaction.enable === false) {\n      viewOfG2.removeInteraction(interaction.type);\n    } else {\n      viewOfG2.interaction(interaction.type, interaction.cfg);\n    }\n  }); // 6. annotations\n\n  each(annotations, function (annotation) {\n    viewOfG2.annotation()[annotation.type](__assign({}, annotation));\n  }); // 7. animation (先做动画)\n\n  if (typeof animation === 'boolean') {\n    viewOfG2.animate(false);\n  } else {\n    viewOfG2.animate(true); // 所有的 Geometry 都使用同一动画（各个图形如有区别，todo 自行覆盖）\n\n    each(viewOfG2.geometries, function (g) {\n      g.animate(animation);\n    });\n  }\n\n  if (tooltip) {\n    // 8. tooltip\n    viewOfG2.interaction('tooltip');\n    viewOfG2.tooltip(tooltip);\n  } else if (tooltip === false) {\n    viewOfG2.removeInteraction('tooltip');\n  }\n}","map":null,"metadata":{},"sourceType":"module"}