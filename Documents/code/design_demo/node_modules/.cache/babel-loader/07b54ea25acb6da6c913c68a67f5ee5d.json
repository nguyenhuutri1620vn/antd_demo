{"ast":null,"code":"import greedyFAS from './greedy-fas';\n\nconst run = g => {\n  const weightFn = g => {\n    return e => g.edge(e).weight;\n  };\n\n  const fas = g.graph().acyclicer === \"greedy\" ? greedyFAS(g, weightFn(g)) : dfsFAS(g);\n  fas === null || fas === void 0 ? void 0 : fas.forEach(e => {\n    const label = g.edge(e);\n    g.removeEdge(e);\n    label.forwardName = e.name;\n    label.reversed = true;\n    g.setEdge(e.w, e.v, label, `rev-${Math.random()}`);\n  });\n};\n\nconst dfsFAS = g => {\n  const fas = [];\n  const stack = {};\n  const visited = {};\n\n  const dfs = v => {\n    var _a;\n\n    if (visited.hasOwnProperty(v)) {\n      return;\n    }\n\n    visited[v] = true;\n    stack[v] = true;\n    (_a = g.outEdges(v)) === null || _a === void 0 ? void 0 : _a.forEach(e => {\n      if (stack.hasOwnProperty(e.w)) {\n        fas.push(e);\n      } else {\n        dfs(e.w);\n      }\n    });\n    delete stack[v];\n  };\n\n  g.nodes().forEach(dfs);\n  return fas;\n};\n\nconst undo = g => {\n  g.edges().forEach(e => {\n    const label = g.edge(e);\n\n    if (label.reversed) {\n      g.removeEdge(e);\n      const forwardName = label.forwardName;\n      delete label.reversed;\n      delete label.forwardName;\n      g.setEdge(e.w, e.v, label, forwardName);\n    }\n  });\n};\n\nexport default {\n  run,\n  undo\n};","map":null,"metadata":{},"sourceType":"module"}