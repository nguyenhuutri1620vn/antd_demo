{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _initializerDefineProperty from \"@babel/runtime/helpers/initializerDefineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/initializerWarningHelper\";\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _temp;\n\nimport { inject, injectable, named } from 'inversify';\nimport { IDENTIFIER } from '../../identifier';\nimport { CopyPass } from './passes/CopyPass';\nimport { PixelPickingPass } from './passes/PixelPickingPass';\nimport { RenderPass } from './passes/RenderPass';\nexport var RendererSystem = (_dec = injectable(), _dec2 = inject(IDENTIFIER.Systems), _dec3 = named(IDENTIFIER.FrameGraphSystem), _dec4 = inject(IDENTIFIER.RenderPassFactory), _dec5 = inject(IDENTIFIER.ConfigService), _dec6 = inject(IDENTIFIER.ResourcePool), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function () {\n  function RendererSystem() {\n    _classCallCheck(this, RendererSystem);\n\n    _initializerDefineProperty(this, \"frameGraphSystem\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"renderPassFactory\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"configService\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"resourcePool\", _descriptor4, this);\n  }\n\n  _createClass(RendererSystem, [{\n    key: \"execute\",\n    value: function () {\n      var _execute = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(views) {\n        var _this$renderPassFacto, setupRenderPass, executeRenderPass, renderPass, _this$renderPassFacto2, setupCopyPass, executeCopyPass, tearDownCopyPass, copyPass;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // const pixelPickingPass = this.renderPassFactory<PixelPickingPassData>(\n                //   PixelPickingPass.IDENTIFIER,\n                // );\n                // const {\n                //   setup: setupPixelPickingPass,\n                //   execute: executePixelPickingPass,\n                //   tearDown: tearDownPickingPass,\n                // } = pixelPickingPass;\n                // this.frameGraphSystem.addPass<PixelPickingPassData>(\n                //   PixelPickingPass.IDENTIFIER,\n                //   setupPixelPickingPass,\n                //   executePixelPickingPass,\n                //   tearDownPickingPass,\n                // );\n                _this$renderPassFacto = this.renderPassFactory(RenderPass.IDENTIFIER), setupRenderPass = _this$renderPassFacto.setup, executeRenderPass = _this$renderPassFacto.execute;\n                renderPass = this.frameGraphSystem.addPass(RenderPass.IDENTIFIER, setupRenderPass, executeRenderPass);\n                _this$renderPassFacto2 = this.renderPassFactory(CopyPass.IDENTIFIER), setupCopyPass = _this$renderPassFacto2.setup, executeCopyPass = _this$renderPassFacto2.execute, tearDownCopyPass = _this$renderPassFacto2.tearDown;\n                copyPass = this.frameGraphSystem.addPass(CopyPass.IDENTIFIER, setupCopyPass, executeCopyPass, tearDownCopyPass);\n                this.frameGraphSystem.present(copyPass.data.output);\n              // this.frameGraphSystem.present(renderPass.data.output);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function execute(_x) {\n        return _execute.apply(this, arguments);\n      }\n\n      return execute;\n    }()\n  }, {\n    key: \"tearDown\",\n    value: function tearDown() {\n      this.resourcePool.clean();\n    }\n  }, {\n    key: \"pick\",\n    value: function pick(position, view) {\n      var pickingPass = this.renderPassFactory(PixelPickingPass.IDENTIFIER);\n      return pickingPass.pick(position, view);\n    }\n  }]);\n\n  return RendererSystem;\n}(), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"frameGraphSystem\", [_dec2, _dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"renderPassFactory\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"configService\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"resourcePool\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class2)) || _class);","map":null,"metadata":{},"sourceType":"module"}