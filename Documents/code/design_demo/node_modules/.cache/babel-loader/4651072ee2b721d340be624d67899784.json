{"ast":null,"code":"var geojsonArea = require('@mapbox/geojson-area');\n\nmodule.exports = rewind;\n\nfunction rewind(gj, outer) {\n  switch (gj && gj.type || null) {\n    case 'FeatureCollection':\n      gj.features = gj.features.map(curryOuter(rewind, outer));\n      return gj;\n\n    case 'GeometryCollection':\n      gj.geometries = gj.geometries.map(curryOuter(rewind, outer));\n      return gj;\n\n    case 'Feature':\n      gj.geometry = rewind(gj.geometry, outer);\n      return gj;\n\n    case 'Polygon':\n    case 'MultiPolygon':\n      return correct(gj, outer);\n\n    default:\n      return gj;\n  }\n}\n\nfunction curryOuter(a, b) {\n  return function (_) {\n    return a(_, b);\n  };\n}\n\nfunction correct(_, outer) {\n  if (_.type === 'Polygon') {\n    _.coordinates = correctRings(_.coordinates, outer);\n  } else if (_.type === 'MultiPolygon') {\n    _.coordinates = _.coordinates.map(curryOuter(correctRings, outer));\n  }\n\n  return _;\n}\n\nfunction correctRings(_, outer) {\n  outer = !!outer;\n  _[0] = wind(_[0], outer);\n\n  for (var i = 1; i < _.length; i++) {\n    _[i] = wind(_[i], !outer);\n  }\n\n  return _;\n}\n\nfunction wind(_, dir) {\n  return cw(_) === dir ? _ : _.reverse();\n}\n\nfunction cw(_) {\n  return geojsonArea.ring(_) >= 0;\n}","map":null,"metadata":{},"sourceType":"script"}