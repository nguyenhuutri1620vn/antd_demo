{"ast":null,"code":"/**\n * 基于 G 的按钮组件\n */\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { deepMix } from '@antv/util';\nimport { PLAY_PAUSE_BTN } from './constant';\n\nvar Button =\n/** @class */\nfunction () {\n  function Button(cfg) {\n    this.config = deepMix({}, cfg);\n    this.init();\n  }\n\n  Button.prototype.update = function (cfg) {\n    this.config = deepMix({}, this.config, cfg);\n    this.updateElement();\n    this.renderMarker();\n  };\n\n  Button.prototype.init = function () {\n    this.initElement();\n    this.renderMarker();\n  };\n\n  Button.prototype.initElement = function () {\n    var _a = this.config,\n        group = _a.group,\n        style = _a.style;\n    var _b = style.scale,\n        scale = _b === void 0 ? 1 : _b,\n        _c = style.offsetX,\n        offsetX = _c === void 0 ? 0 : _c,\n        _d = style.offsetY,\n        offsetY = _d === void 0 ? 0 : _d;\n    var x = this.config.x + offsetX;\n    var y = this.config.y + offsetY;\n    var buttonGroup = group.addGroup({\n      name: PLAY_PAUSE_BTN\n    });\n    this.startMarkerGroup = buttonGroup.addGroup({\n      name: PLAY_PAUSE_BTN\n    });\n    this.circle = group.addShape('circle', {\n      attrs: __assign({\n        x: x,\n        y: y,\n        r: this.config.r * scale\n      }, style),\n      name: PLAY_PAUSE_BTN\n    });\n    this.startMarker = this.startMarkerGroup.addShape('path', {\n      attrs: {\n        path: this.getStartMarkerPath(x, y, scale),\n        fill: style.stroke || '#aaa'\n      },\n      name: 'start-marker'\n    });\n    this.pauseMarkerGroup = buttonGroup.addGroup({\n      name: PLAY_PAUSE_BTN\n    });\n    var width = 0.25 * this.config.r * scale;\n    var height = 0.5 * this.config.r * Math.sqrt(3) * scale;\n    this.pauseLeftMarker = this.pauseMarkerGroup.addShape('rect', {\n      attrs: {\n        x: x - 0.375 * this.config.r * scale,\n        y: y - height / 2,\n        width: width,\n        height: height,\n        fill: style.stroke || '#aaa',\n        lineWidth: 0\n      }\n    });\n    this.pauseRightMarker = this.pauseMarkerGroup.addShape('rect', {\n      attrs: {\n        x: x + 1 / 8 * this.config.r * scale,\n        y: y - height / 2,\n        width: width,\n        height: height,\n        fill: style.stroke || '#aaa',\n        lineWidth: 0\n      }\n    });\n  };\n\n  Button.prototype.updateElement = function () {\n    var _a = this.config.style,\n        _b = _a.scale,\n        scale = _b === void 0 ? 1 : _b,\n        _c = _a.offsetX,\n        offsetX = _c === void 0 ? 0 : _c,\n        _d = _a.offsetY,\n        offsetY = _d === void 0 ? 0 : _d;\n    var x = this.config.x + offsetX;\n    var y = this.config.y + offsetY;\n    this.circle.attr('x', x);\n    this.circle.attr('y', y);\n    this.circle.attr('r', this.config.r * scale);\n    this.startMarker.attr('path', this.getStartMarkerPath(x, y, scale));\n    var width = 0.25 * this.config.r * scale;\n    var height = 0.5 * this.config.r * Math.sqrt(3) * scale;\n    this.pauseLeftMarker.attr('x', x - (1 / 4 + 1 / 8) * this.config.r * scale);\n    this.pauseLeftMarker.attr('y', y - height / 2);\n    this.pauseLeftMarker.attr('width', width);\n    this.pauseLeftMarker.attr('height', height);\n    this.pauseRightMarker.attr('x', x + 1 / 8 * this.config.r * scale);\n    this.pauseRightMarker.attr('y', y - height / 2);\n    this.pauseRightMarker.attr('width', width);\n    this.pauseRightMarker.attr('height', height);\n  };\n\n  Button.prototype.renderMarker = function () {\n    if (this.config.isPlay) {\n      this.startMarkerGroup.hide();\n      this.pauseMarkerGroup.show();\n    } else {\n      this.startMarkerGroup.show();\n      this.pauseMarkerGroup.hide();\n    }\n  };\n  /** 获取播放键 marker path */\n\n\n  Button.prototype.getStartMarkerPath = function (x, y, scale) {\n    var sideLength = 0.5 * this.config.r * Math.sqrt(3) * scale;\n    return [['M', x - sideLength / Math.sqrt(3) / 2, y - sideLength / 2], ['L', x + sideLength / Math.sqrt(3), y], ['L', x - sideLength / Math.sqrt(3) / 2, y + sideLength / 2]];\n  };\n\n  return Button;\n}();\n\nexport default Button;","map":null,"metadata":{},"sourceType":"module"}