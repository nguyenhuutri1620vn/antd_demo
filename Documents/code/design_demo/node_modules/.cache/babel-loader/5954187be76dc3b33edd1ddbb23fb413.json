{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { IconStore, MODELS, XFlowGraphCommands } from '@antv/xflow-core';\nimport { ZoomInOutlined, ZoomOutOutlined, OneToOneOutlined, CompressOutlined } from '@ant-design/icons';\nimport { createToolbarConfig } from '../canvas-toolbar';\nexport var CANVAS_SCALE_TOOLBAR_CONFIG;\n\n(function (CANVAS_SCALE_TOOLBAR_CONFIG) {\n  IconStore.set('ZoomInOutlined', ZoomInOutlined);\n  IconStore.set('ZoomOutOutlined', ZoomOutOutlined);\n  IconStore.set('OneToOneOutlined', OneToOneOutlined);\n  IconStore.set('CompressOutlined', CompressOutlined);\n  CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_IN = XFlowGraphCommands.GRAPH_ZOOM.id + '-zoom-in';\n  CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_OUT = XFlowGraphCommands.GRAPH_ZOOM.id + '-zoom-out';\n  CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_ONE = XFlowGraphCommands.GRAPH_ZOOM.id + '-scale-to-one';\n  CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_FIT = XFlowGraphCommands.GRAPH_ZOOM.id + '-scale-to-fit';\n  CANVAS_SCALE_TOOLBAR_CONFIG.MAX_SCALE = 1.5;\n  CANVAS_SCALE_TOOLBAR_CONFIG.MIN_SCALE = 0.05;\n  CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions = {\n    maxScale: CANVAS_SCALE_TOOLBAR_CONFIG.MAX_SCALE,\n    minScale: CANVAS_SCALE_TOOLBAR_CONFIG.MIN_SCALE\n  };\n\n  CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig = zoomFactor => {\n    return [{\n      name: 'main',\n      items: [{\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_IN,\n        tooltip: '放大',\n        iconName: 'ZoomInOutlined',\n        onClick: _ref => {\n          let {\n            commandService\n          } = _ref;\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: 0.1,\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_OUT,\n        tooltip: '缩小',\n        iconName: 'ZoomOutOutlined',\n        onClick: _ref2 => {\n          let {\n            commandService\n          } = _ref2;\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: -0.1,\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_ONE,\n        iconName: 'OneToOneOutlined',\n        tooltip: '缩放到1:1',\n        isEnabled: zoomFactor !== 1,\n        onClick: _ref3 => {\n          let {\n            commandService\n          } = _ref3;\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: 'real',\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_FIT,\n        tooltip: '缩放到适应屏幕',\n        iconName: 'CompressOutlined',\n        onClick: _ref4 => {\n          let {\n            commandService\n          } = _ref4;\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: 'fit',\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }]\n    }];\n  };\n})(CANVAS_SCALE_TOOLBAR_CONFIG || (CANVAS_SCALE_TOOLBAR_CONFIG = {}));\n\nexport const TOOLBAR_TYPE = 'CANVAS_SCALE_TOOLBAR';\nexport const useConfig = createToolbarConfig(config => {\n  config.setToolbarModelService((model, modelService) => __awaiter(void 0, void 0, void 0, function* () {\n    const graphScale = yield MODELS.GRAPH_SCALE.useValue(modelService);\n    /** 设置初始值*/\n\n    model.setValue(m => {\n      m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig(graphScale.zoomFactor);\n    });\n    const graphScaleModel = yield MODELS.GRAPH_SCALE.getModel(modelService);\n    /** graphScaleModel更新时联动 Toolbar*/\n\n    graphScaleModel.watch(_ref5 => {\n      let {\n        zoomFactor\n      } = _ref5;\n      model.setValue(m => {\n        m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig(zoomFactor);\n      });\n    });\n  }));\n});","map":null,"metadata":{},"sourceType":"module"}