{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-redeclare */\nimport 'reflect-metadata';\n/** Application */\n\nimport { FrontendApplication, IFrontendApplicationContribution } from './application';\n/** Command 模块 */\n\nimport { commandRegistryModule } from '../command/module';\nimport { modelServiceModule } from '../model-service/module';\n/** Extension 注册中心 */\n\nimport { ExtensionRegistry } from './components/extension-registry';\n/** 类型定义 */\n\nimport { Contribution, Container, Module } from 'mana-syringe';\nexport { ExtensionRegistry };\n/** application */\n\nconst appMainModule = Module(register => {\n  /** 声明IFrontendApplicationContribution扩展点*/\n  Contribution.register(register, IFrontendApplicationContribution);\n  /** 声明 FrontendApplication */\n\n  register(FrontendApplication);\n});\nexport const initApp = moduleRegistry => {\n  const extensions = moduleRegistry.getAllExtensions();\n  const container = new Container();\n  /** command */\n\n  /** react renderer */\n\n  /** 批量创建 extension module */\n\n  const modules = extensions.map(module => {\n    const {\n      createModule,\n      config\n    } = module;\n    return createModule(config);\n  });\n  /** 单独加载 appMainModule */\n\n  container.load(appMainModule);\n  /** 单独加载 commandRegistryModule */\n\n  container.load(commandRegistryModule); // /** 单独加载 modelServiceModule */\n\n  container.load(modelServiceModule);\n  /**\n   * 批量加载 extension module\n   * 包括：menu/toolbar/keybinding/graph\n   */\n\n  modules.forEach(module => {\n    container.load(module);\n  });\n  const app = container.get(FrontendApplication);\n  return app;\n};","map":null,"metadata":{},"sourceType":"module"}