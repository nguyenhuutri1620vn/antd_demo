{"ast":null,"code":"var _jsxFileName = \"/home/trinh/Documents/code/design_demo/src/components/frontend/ListProduct.js\";\nimport { MenuOutlined } from \"@ant-design/icons/lib/icons\";\nimport { AutoComplete, BackTop, Card, Col, Pagination, Row, Select, Spin } from \"antd\";\nimport axios from \"axios\";\nimport _ from \"lodash\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport product_image from \"../../asset/frontend/product-image.jpg\";\nimport Slidebar from \"../../layouts/frontend/Slidebar\";\n\nfunction ListProduct() {\n  document.title = \"Product list\";\n  const [product, setProduct] = useState([]);\n  const [slide, setSlide] = useState([]);\n  const {\n    Meta\n  } = Card;\n  const [current, setCurrent] = useState(1);\n  const numEachPage = 54;\n  const [brand, setBrand] = useState([]);\n  const [state, setState] = useState({\n    min: 0,\n    max: numEachPage\n  });\n  const [loading, setLoading] = useState(true);\n\n  function onSelectAotu(value, option) {\n    console.log(\"a\");\n  }\n\n  useEffect(() => {\n    axios.get(\"/product?q=rose&limit=25&page=1\").then(response => {\n      if (response.status === 200) {\n        setProduct(response.data);\n        setLoading(false);\n      } else {\n        console.log(\"Connect fail\");\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n    return () => {};\n  }, []);\n  const options = useMemo(() => {\n    const options = [];\n\n    for (let i = 0; i < product.length; i++) {\n      options.push(product[i].brand);\n    }\n\n    return _.uniq(options);\n  }, [product]);\n  const handleChangeBrand = useCallback(value => {\n    setBrand(value);\n    setCurrent(1);\n    setState({ ...state,\n      min: 0\n    });\n    setSlide([]);\n  }, [state]);\n  const filteredOptions = options.filter(o => !brand.includes(o));\n\n  const handleChange = (value, pageSize) => {\n    console.log(\"product\");\n    console.log(product);\n\n    if (pageSize !== numEachPage) {\n      setState({\n        min: (value - 1) * pageSize,\n        max: value * pageSize\n      });\n    } else {\n      setState({\n        min: (value - 1) * numEachPage,\n        max: value * numEachPage\n      });\n    }\n\n    setCurrent(value);\n  };\n\n  const filterProduct = useMemo(() => {\n    const brandMap = brand.reduce((obj, next) => {\n      obj[next] = true;\n      return obj;\n    }, {});\n    return brand.length ? _(product || {}).filter(i => brandMap[i.brand]).value() : product;\n  }, [brand, product]);\n  const finalProduct = useMemo(() => {\n    return _.slice(filterProduct, state.min, state.max);\n  }, [filterProduct, state]);\n\n  const LoadingPage = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loading-screen\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    }, \" \", /*#__PURE__*/React.createElement(Spin, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 18\n      }\n    }, \"Loading...\"));\n  };\n\n  const handleClick = useCallback(value => {\n    setSlide(product.filter(item => item.brand === value.key));\n    setCurrent(1);\n    setBrand([]);\n    setState({ ...state,\n      min: 0\n    });\n  }, [product, state]);\n  const finalSearch = useMemo(() => {\n    return _.slice(slide, state.min, state.max);\n  }, [slide, state]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"site-card-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BackTop, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Col, {\n    span: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"menu-slider\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"menu-slider-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MenuOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }), \" Product options\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"menu-slider-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Slidebar, {\n    eventOnClick: handleClick,\n    handleChangeBrand: handleChangeBrand,\n    brand: options,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(Col, {\n    span: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    mode: \"multiple\",\n    placeholder: \"Inserted brand\",\n    value: brand,\n    onChange: handleChangeBrand,\n    style: {\n      width: \"99.5%\",\n      marginBottom: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Select.Option, {\n    key: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, \"All\"), filteredOptions.map(item => /*#__PURE__*/React.createElement(Select.Option, {\n    key: item,\n    value: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }\n  }, item)))), /*#__PURE__*/React.createElement(Col, {\n    span: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(AutoComplete, {\n    className: \"search-by-name\",\n    options: product,\n    placeholder: \"Search by name\",\n    filterOption: (inputValue, option) => option.name.toUpperCase().indexOf(inputValue.toUpperCase()) !== -1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    gutter: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, loading ? /*#__PURE__*/React.createElement(LoadingPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  }) : (finalSearch.length ? finalSearch : finalProduct).map(item => {\n    return /*#__PURE__*/React.createElement(Col, {\n      span: 4,\n      style: {\n        marginBottom: 30\n      },\n      key: item.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `product-item/${item.id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      hoverable: true,\n      title: item.name,\n      bordered: false,\n      children: true,\n      className: \"card-product\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product-image-area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"\",\n      src: product_image,\n      className: \"product-image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 27\n      }\n    })), /*#__PURE__*/React.createElement(Meta, {\n      title: item.brand,\n      description: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"description-product\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 29\n        }\n      }, item.ingredient_list.toString()),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 25\n      }\n    }))));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"paginate-align\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Pagination, {\n    current: current,\n    pageSizeOptions: [10, 20, 30, 50, 100],\n    size: \"large\",\n    total: slide.length || filterProduct.length,\n    showSizeChanger: true,\n    showQuickJumper: true,\n    defaultPageSize: numEachPage,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 15\n    }\n  })))));\n}\n\nexport default ListProduct;","map":{"version":3,"sources":["/home/trinh/Documents/code/design_demo/src/components/frontend/ListProduct.js"],"names":["MenuOutlined","AutoComplete","BackTop","Card","Col","Pagination","Row","Select","Spin","axios","_","React","useCallback","useEffect","useMemo","useState","Link","product_image","Slidebar","ListProduct","document","title","product","setProduct","slide","setSlide","Meta","current","setCurrent","numEachPage","brand","setBrand","state","setState","min","max","loading","setLoading","onSelectAotu","value","option","console","log","get","then","response","status","data","catch","error","options","i","length","push","uniq","handleChangeBrand","filteredOptions","filter","o","includes","handleChange","pageSize","filterProduct","brandMap","reduce","obj","next","finalProduct","slice","LoadingPage","handleClick","item","key","finalSearch","width","marginBottom","map","inputValue","name","toUpperCase","indexOf","id","ingredient_list","toString"],"mappings":"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","sourcesContent":["import { MenuOutlined } from \"@ant-design/icons/lib/icons\";\nimport {\n  AutoComplete,\n  BackTop,\n  Card,\n  Col,\n  Pagination,\n  Row,\n  Select,\n  Spin,\n} from \"antd\";\nimport axios from \"axios\";\nimport _ from \"lodash\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport product_image from \"../../asset/frontend/product-image.jpg\";\nimport Slidebar from \"../../layouts/frontend/Slidebar\";\n\nfunction ListProduct() {\n  document.title = \"Product list\";\n\n  const [product, setProduct] = useState([]);\n  const [slide, setSlide] = useState([]);\n  const { Meta } = Card;\n  const [current, setCurrent] = useState(1);\n  const numEachPage = 54;\n  const [brand, setBrand] = useState([]);\n  const [state, setState] = useState({\n    min: 0,\n    max: numEachPage,\n  });\n  const [loading, setLoading] = useState(true);\n\n  function onSelectAotu(value, option) {\n    console.log(\"a\");\n  }\n\n  useEffect(() => {\n    axios\n      .get(\"/product?q=rose&limit=25&page=1\")\n      .then((response) => {\n        if (response.status === 200) {\n          setProduct(response.data);\n          setLoading(false);\n        } else {\n          console.log(\"Connect fail\");\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n\n    return () => {};\n  }, []);\n\n  const options = useMemo(() => {\n    const options = [];\n    for (let i = 0; i < product.length; i++) {\n      options.push(product[i].brand);\n    }\n    return _.uniq(options);\n  }, [product]);\n\n  const handleChangeBrand = useCallback(\n    (value) => {\n      setBrand(value);\n      setCurrent(1);\n      setState({ ...state, min: 0 });\n      setSlide([]);\n    },\n    [state]\n  );\n\n  const filteredOptions = options.filter((o) => !brand.includes(o));\n  const handleChange = (value, pageSize) => {\n    console.log(\"product\");\n    console.log(product);\n    if (pageSize !== numEachPage) {\n      setState({\n        min: (value - 1) * pageSize,\n        max: value * pageSize,\n      });\n    } else {\n      setState({\n        min: (value - 1) * numEachPage,\n        max: value * numEachPage,\n      });\n    }\n    setCurrent(value);\n  };\n\n  const filterProduct = useMemo(() => {\n    const brandMap = brand.reduce((obj, next) => {\n      obj[next] = true;\n      return obj;\n    }, {});\n    return brand.length\n      ? _(product || {})\n          .filter((i) => brandMap[i.brand])\n          .value()\n      : product;\n  }, [brand, product]);\n\n  const finalProduct = useMemo(() => {\n    return _.slice(filterProduct, state.min, state.max);\n  }, [filterProduct, state]);\n\n  const LoadingPage = () => {\n    return (\n      <div className=\"loading-screen\">\n        {\" \"}\n        <Spin /> <span>Loading...</span>\n      </div>\n    );\n  };\n\n  const handleClick = useCallback(\n    (value) => {\n      setSlide(product.filter((item) => item.brand === value.key));\n      setCurrent(1);\n      setBrand([]);\n      setState({ ...state, min: 0 });\n    },\n    [product, state]\n  );\n\n  const finalSearch = useMemo(() => {\n    return _.slice(slide, state.min, state.max);\n  }, [slide, state]);\n  return (\n    <div className=\"site-card-wrapper\">\n      <Row>\n        <BackTop />\n        <Col span={4}>\n          <div className=\"menu-slider\">\n            <div className=\"menu-slider-title\">\n              <MenuOutlined /> Product options\n            </div>\n            <div className=\"menu-slider-content\">\n              <Slidebar\n                eventOnClick={handleClick}\n                handleChangeBrand={handleChangeBrand}\n                brand={options}\n              />\n            </div>\n          </div>\n        </Col>\n        <Col span={20}>\n          <Row>\n            <Col span={16}>\n              <Select\n                mode=\"multiple\"\n                placeholder=\"Inserted brand\"\n                value={brand}\n                onChange={handleChangeBrand}\n                style={{ width: \"99.5%\", marginBottom: 30 }}\n              >\n                <Select.Option key=\"0\">All</Select.Option>\n                {filteredOptions.map((item) => (\n                  <Select.Option key={item} value={item}>\n                    {item}\n                  </Select.Option>\n                ))}\n              </Select>\n            </Col>\n            <Col span={8}>\n              <AutoComplete\n                className=\"search-by-name\"\n                options={product}\n                placeholder=\"Search by name\"\n                filterOption={(inputValue, option) =>\n                  option.name\n                    .toUpperCase()\n                    .indexOf(inputValue.toUpperCase()) !== -1\n                }\n              />\n            </Col>\n          </Row>\n          <Row gutter={16}>\n            {loading ? (\n              <LoadingPage />\n            ) : (\n              (finalSearch.length ? finalSearch : finalProduct).map((item) => {\n                return (\n                  <Col span={4} style={{ marginBottom: 30 }} key={item.id}>\n                    <Link to={`product-item/${item.id}`}>\n                      <Card\n                        hoverable\n                        title={item.name}\n                        bordered={false}\n                        children\n                        className=\"card-product\"\n                      >\n                        <div className=\"product-image-area\">\n                          <img\n                            alt=\"\"\n                            src={product_image}\n                            className=\"product-image\"\n                          />\n                        </div>\n                        <Meta\n                          title={item.brand}\n                          description={\n                            <div className=\"description-product\">\n                              {item.ingredient_list.toString()}\n                            </div>\n                          }\n                        />\n                      </Card>\n                    </Link>\n                  </Col>\n                );\n              })\n            )}\n          </Row>\n          <div className=\"paginate-align\">\n            {\n              <Pagination\n                current={current}\n                pageSizeOptions={[10, 20, 30, 50, 100]}\n                size=\"large\"\n                total={slide.length || filterProduct.length}\n                showSizeChanger\n                showQuickJumper\n                defaultPageSize={numEachPage}\n                onChange={handleChange}\n              />\n            }\n          </div>\n        </Col>\n      </Row>\n    </div>\n  );\n}\nexport default ListProduct;\n"]},"metadata":{},"sourceType":"module"}